form.addEventListener("submit", function (e) {
  e.preventDefault();

  const data = {
    name: form.name.value,
    phone: form.phone.value,
    email: form.email.value,
    brownRice: Number(brownSelect.value),
    whiteRice: Number(whiteSelect.value),
    total: calculateTotal()
  };

  fetch("https://floral-sun-acc2.roger-c16.workers.dev", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(data)
  })
    .then(res => res.text())
    .then(response => {
      alert("✅ 訂單已送出，謝謝您的訂購！");
      form.reset();
      calculateTotal();
    })
    .catch(error => {
      alert("❌ 送出失敗，請稍後再試。\n" + error);
    });
});
